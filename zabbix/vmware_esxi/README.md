# zabbix templates

## VMWare ESXi
Шаблон для автообнаружения гипервизоров VMWare ESXi и виртуальных машин на них.

### Установка
###### Преобразование значений
Если в `Администрирование -> Общие -> Преобразование значений` нет шаблонов с именами `VMware VirtualMachinePowerState` и `VMware status`, то нужно импортировать файлы из каталога `values_mapping`

###### Шаблоны
Перейти в `Настройка -> Шаблоны` и импортировать файлы из каталога `templates`
К хосту (гипервизору) прикреплять нужно шаблон `Template VMware ESXi`. Остальные крепятся сами (при обнаружении).

###### Скрипт check_esxi_hardware.py
Чтобы работал `check_esxi_hardware.py` нужно поставить [PyWBEM](http://pywbem.sourceforge.net/)

    aptitude install python-pywbem

Требуется python версии 2.6-2.7; в python 3+ работать не будет.

### Важно
В шаблоне на автообнаружение ВМ стоит фильтр `^.+_z$` на имя ВМ, т.е. автоматически будут добавляться только те ВМ, которые имеют суффикс `_z`.
Для измнения нужно перейти в `Настройка -> Шаблоны -> Template VMware ESXi -> Правила обнаружения -> Discover VMware VMs -> Фильтры` и отредактировать или удалить фильтр.

